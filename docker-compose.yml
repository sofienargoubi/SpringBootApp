version: "3.9"
services:
  eureka:
    build:  /SpringBootApp/EurekaServer
    ports:
      - "8761:8761"
    image: "eurekaserver"
  config:
    build: /SpringBootApp/configuration-server
    command: --spring.profiles.active=native
    environment: 
     - spring.cloud.config.server.git.uri=https://github.com/louayyahyaoui/-microservices-config-server.git
    ports:
      - "8880:8880"
    image: "configuration-server"
  gateway:
    build: /SpringBootApp/api-gateway
    environment: 
      - eureka.client.serviceUrl.defaultZone=http://discovery:8761/eureka/
    ports:
      - "8888:8888"
    image: "api-gateway"
  user_service:
    build: /SpringBootApp/user-service
    environment: 
      - eureka.client.serviceUrl.defaultZone=http://discovery:8761/eureka/
    ports:
      - "8084:8084"
    image: "user-service"
  order_service:
    build: /SpringBootApp/order-service
    environment: 
      - eureka.client.serviceUrl.defaultZone=http://discovery:8761/eureka/
    ports:
      - "8085:8085"
    image: "order-service"

